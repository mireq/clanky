<!DOCTYPE html>
<html>
<head>
	<title>Inkscape - export vektorov칳ch ikon</title>
	<meta charset="utf-8" />
	<link href="../../../common/style.css" rel="stylesheet" />
</head>
<body>
<article>

<header>
	<h1>Inkscape - export vektorov칳ch ikon</h1>

	<p>V dne코nom 캜l치nku si porozpr치vame o tom, ako z webov칠ho dizajnu v svg exportova콘 vektorov칠 ikony pomocou  inkscape.</p>
</header>

<h2>Ako na to?</h2>

<p>Export 캜asti svg zo svg je trivi치lna z치le쬴tos콘. Inkscape je predsa svg editor, tak쬰 to mus칤 칤s콘 jednoducho. Po캞me teda na to 游땔</p>

<p>Za캜neme otvoren칤m obr치zka. Ozna캜칤me 캜as콘, ktor칰 chceme exportova콘 a pozrieme si ve쬶os콘 vybranej 캜asti v toolbare.</p>

<figure>
	<a href="img/inkscape_1.png"><img src="img/inkscape_1.png" alt="Ve쬶os콘 v칳beru" /></a>
	<figcaption>Obr치zok <counter></counter>: Ve쬶os콘 v칳beru</figcaption>
</figure>

<p>Teraz vytvor칤me nov칳 dokument (napr. kl치vesovou skratkou <em>Ctrl+N</em>. Po vytvoren칤 nov칠ho dokumentu mus칤me nastavi콘 ve쬶os콘 domumentu. Vlezieme teda do menu <em>S칰bor / Vlastnosti dokumentu</em>. V nastaveniach dokumentu mus칤me upravi콘 zobrazovan칠 jednotky z mm na px. 캝alej v sekcii vlastn치 ve쬶os콘 nastav칤me ve쬶os콘 v칳beru (v tomto pr칤pade 16 a 12 px). 캝alej mus칤me upravi콘 mierku dokumentu na 1 a tak isto mus칤me upravi콘 v칳코ku a 코칤rku dokumentu v 캜asti <em>Viewbox</em>.</p>

<figure>
	<a href="img/inkscape_2.png"><img src="img/inkscape_2.png" alt="Vlastnosti dokumentu" /></a>
	<figcaption>Obr치zok <counter></counter>: Vlastnosti dokumentu</figcaption>
</figure>

<p>Teraz m칪쬸e smelo skop칤rova콘 캜as콘 dokumentu do nov칠ho dokumentu. V toolbare z obr치zku 1 n치sledne nastav칤me poz칤ciu objektu na s칰radnice 0, 0.</p>

<figure>
	<a href="img/inkscape_3.png"><img src="img/inkscape_3.png" alt="Ulo쬰nie s칰boru" /></a>
	<figcaption>Obr치zok <counter></counter>: Ulo쬰nie s칰boru</figcaption>
</figure>

<p>Zost치va u len ulo쬴콘 s칰bor, tak쬰 otvor칤me <em>S칰bor / Ulo쬴콘 ako</em>, vyberieme form치t optimalizovan칠 svg, preto쬰 defaultn칳 form치t je extr칠mne blbos콘ami prepl치can칳, vyklik치me optimaliz치cie, potvrd칤me ulo쬰nie, teraz sta캜칤 u len zatvori콘 okno exportu, zatvori콘 okno obr치zka, potvrdi콘 zatvorenie okna a je to. No dobre, to by 코lo, ale, mus칤 to 칤s콘 aj jednoduch코ie.</p>

<h2>Jednoduch코ie?</h2>

<p>Inkscape porporuje export 캜asti obr치zka. Samozrejme ako spr치vny vektorov칳 editor dok치쬰 obr치zky exportova콘 len v rastrovom form치te 游뱂</p>

<p>H쬬danie ma v prvom rade zaviedlo k <a href="https://bugs.launchpad.net/inkscape/+bug/170546">tomuto bugu z roku 2005</a>, alebo k <a href="https://gitlab.com/inkscape/inbox/-/issues/88">trochu nov코iemu bugu</a>.</p>

<p>No dobre, tak쬰 export vo vektorov칳ch form치toch nem치me. 캛o tak vytvori콘 nov칳 dokument priamo z v칳beru? <a href="https://gitlab.com/inkscape/inbox/-/issues/2238">Ani to nie</a>.</p>

<h2>Po캞me to opravi콘</h2>

<p>It's 游댣游</p>

<p>Inkscape umo쮄갓je vyv칤ja콘 vlastn칠 roz코칤renia. Tak si po캞me roz코칤ri콘 inkscape o export v칳beru do samostatn칠ho s칰boru.</p>

<p>Za캜neme popisom pluginu. Popis ulo쮂셠e do adres치ra s roz코칤reniami (n치jdeme ho v nastaveniach - <em>칔pravy / Nastavenia / Syst칠m / Pou쮂셨ate쬽k칠 roz코칤renia</em> pod n치zvom <em>export_selection.inx</em>). Popis tohto s칰boru n치jdeme na <a href="https://wiki.inkscape.org/wiki/index.php?title=Extensions:_INX_widgets_and_parameters">tejto adrese</a>. Okrem popisu som tam pridal aj parameter pre nastavenie cesty pre export a nastavenie transform치cie. V칳sledn칳 s칰bor vyzer치 takto:</p>

<pre class="code-xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;inkscape-extension xmlns="http://www.inkscape.org/namespace/inkscape/extension"&gt;
    &lt;_name&gt;Export selection as svg&lt;/_name&gt;
    &lt;id&gt;sk.linuxos.export_selection&lt;/id&gt;

    &lt;dependency type="executable" location="extensions"&gt;export_selection.py&lt;/dependency&gt;
    &lt;dependency type="executable" location="extensions"&gt;inkex.py&lt;/dependency&gt;

    &lt;param name="wrap_transform" type="boolean" _gui-text="Wrap final document in transform"&gt;false&lt;/param&gt;
    &lt;param name="export_dir" type="string" gui-text="Path to save image"&gt;./inkscape_export/&lt;/param&gt;

    &lt;effect needs-document="true" needs-live-preview="false"&gt;
        &lt;object-type&gt;all&lt;/object-type&gt;
        &lt;menu-tip&gt;Export selection to separate SVG file.&lt;/menu-tip&gt;
        &lt;effects-menu&gt;
            &lt;submenu _name="Export"/&gt;
        &lt;/effects-menu&gt;
    &lt;/effect&gt;

    &lt;script&gt;
        &lt;command reldir="extensions" interpreter="python"&gt;export_selection.py&lt;/command&gt;
    &lt;/script&gt;
&lt;/inkscape-extension&gt;
</pre>

<p>캝alej pokra캜ujeme s칰borom <em>export_selection.py</em>. V nasleduj칰com v칳pise je z치kladn치 kostra pluginu. Pri vyvolan칤 cez menu <em>Export / Export selection as svg</em> len vyp칤코e argumenty skriptu.</p>

<pre class="code-python">
# -*- coding: utf-8 -*-
import inkex
import sys


class ExportObject(inkex.EffectExtension):
    def add_arguments(self, pars):
        pars.add_argument(
            "--wrap_transform",
            action="store",
            type=inkex.Boolean,
            dest="wrap_transform",
            default=False,
            help="Wrap final document in transform"
        )
        pars.add_argument(
            "--export_dir",
            default="~/inkscape_export/",
            help="Location to save exported documents."
        )

    def effect(self):
        sys.stderr.write(str(self.options))


if __name__ == '__main__':
    action = ExportObject()
    action.run()
</pre>

<p>Skript taktie m칪쬸e spusti콘 z termin치lu pr칤kazom <code>inkscape --actions="select-by-id:[ID objektu]; verb:sk.linuxos.export_selection.noprefs" --batch-process vstup.svg</code>.</p>

<p>Vo funkcii <code>add_arguments</code> sa definuj칰 agrumenty. Tie sa musia zhodova콘 s argumentmi definovan칳mi v inx s칰bore. Samotn칠 vykonanie akcie bude implementovan칠 v met칩de effect.</p>

<p>Teraz m칪쬰 za캜a콘 skuto캜n치 sranda. API roz코칤ren칤 n치jdeme na <a href="https://inkscape.gitlab.io/extensions/documentation/">tejto adrese</a>, ale omnoho u쬴to캜nej코ie n치m bude pri v칳voji rovno pozera콘 do <a href="https://gitlab.com/inkscape/extensions/-/tree/master/inkex">k칩du modulu inkex</a>, alebo do <a href="https://gitlab.com/inkscape/extensions/-/tree/master/">k칩du existuj칰cich roz코칤ren칤</a>.</p>

<p>Na코콘astie, alebo 쬴a, ako pre koho m치me minim치lne mo쬹osti pri volan칤 intern칳ch funkci칤 inkscapu. Dokonca aj tie akcie, ktor칠 sa daj칰 vola콘 funguj칰 tak, 쬰 spustia nov칰 in코tanciu inkscape a vykonaj칰 batch process (e코te aj s otvoren칤m a zatvoren칤m 캞al코ieho okna). Takto napr칤klad vyzer치 pr칤kaz pre zru코enie zoskupenia objektu s vybran칳m ID:</p>

<pre class="code-python">
inkex.command.inkscape_command(document, select=GROUP_ID, verbs=['SelectionUnGroup'])
</pre>

<p>Zoznam pr칤kazov inkscapu sa d치 z칤ska콘 pr칤kazom <code>inkscape --verb-list</code>.</p>

<p>Druh칳 sp칪sob, ktor칳m sa d치 upravova콘 dokument je priama modifik치cia objektu <code>self.svg</code>, 캜o je v podstate len wrapper nad lxml.etree. M칪쬸e teda dokument smelo modifikova콘 pomocou lxml volan칤.</p>

<p>V칳sledn칳 skript, ktor칳 exportuje v칳ber v optimalizovanom form치te pomocou optimaliz치tora scour som <a href="https://github.com/mireq/inkscape-export-selection-as-svg/blob/918194683a9f71f2aae13054d8ef394992f80936/export_selection.py">zverejnil na githube</a>. Pou쬴t치 je ako priama modifik치cia DOM, tak aj volanie batch pr칤kazov inkscape, preto쬰 som nena코iel jednoduch칳 sp칪sob, ako objekty vy켿a콘 zo skupiny.</p>

<p>Plugin sa d치 spomenut칳m pr칤kazom spusti콘 priamo z konzoly bez interackie u쮂셨ate쬬, alebo, 캜o sa mi zdalo najpohodlnej코ie skript sa d치 nabindova콘 na kl치vesov칰 skratku cez <em>Upravi콘 / Nastavenia / Rozhranie / Kl치vesov칠 skratky</em> a export n치sledne prebieha sp칪sobom: vyberiem objekt, stla캜칤m kl치vesov칰 skratku, hotovo. V칳sledkom je optimalizovan칠 svg vhodn칠 priamo na pou쬴tie vo webovej str치nke (napr. vo forme SVG spritov).</p>

<p>Uk치쬶a v칳sledn칠ho svg (kompletn칳 obr치zok):</p>

<pre class="code-xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;svg width="16" height="12" version="1.1" viewBox="0 0 16 12" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
 &lt;path d="m8 8a2.319 2.319 0 0 1-1-0.336l-7-3.664v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7l-7 3.664a2.319 2.319 0 0 1-1 0.336zm7-8h-14a1 1 0 0 0-1 1v0.758l8 4.2 8-4.2v-0.758a1 1 0 0 0-1-1z" fill="#777"/&gt;
&lt;/svg&gt;
</pre>

</article>
<script src="../../../common/script.js"></script>
</body>
</html>
